<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>巧用Javascript的toString方法 | YF的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/cat.png">
    <meta name="description" content="A front end blog developed by YF">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.75dc69ab.js" as="script"><link rel="preload" href="/assets/js/2.a673c79f.js" as="script"><link rel="preload" href="/assets/js/15.16cf6885.js" as="script"><link rel="prefetch" href="/assets/js/10.23fbdd11.js"><link rel="prefetch" href="/assets/js/11.7edc89c0.js"><link rel="prefetch" href="/assets/js/12.16a82503.js"><link rel="prefetch" href="/assets/js/13.a28e4b8f.js"><link rel="prefetch" href="/assets/js/14.781c2e57.js"><link rel="prefetch" href="/assets/js/3.7ec632bc.js"><link rel="prefetch" href="/assets/js/4.7adb1798.js"><link rel="prefetch" href="/assets/js/5.d3359473.js"><link rel="prefetch" href="/assets/js/6.5eff19f1.js"><link rel="prefetch" href="/assets/js/7.b7bb35e8.js"><link rel="prefetch" href="/assets/js/8.338e4b9d.js"><link rel="prefetch" href="/assets/js/9.3842a138.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/YF.png" alt="YF的博客" class="logo"> <span class="site-name can-hide">YF的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS基本功" class="dropdown-title"><span class="title">JS基本功</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS基本功" class="mobile-dropdown-title"><span class="title">JS基本功</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/garbageCollect.html" class="nav-link">
  聊聊JS垃圾回收机制
</a></li><li class="dropdown-item"><!----> <a href="/JS/shallow&amp;deepClone.html" class="nav-link">
  聊聊Javascript里的深浅拷贝
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTTP网络" class="dropdown-title"><span class="title">HTTP网络</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTTP网络" class="mobile-dropdown-title"><span class="title">HTTP网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/crossOrigin.html" class="nav-link">
  从cookie讲到跨域
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="最佳实践" class="dropdown-title"><span class="title">最佳实践</span> <span class="arrow down"></span></button> <button type="button" aria-label="最佳实践" class="mobile-dropdown-title"><span class="title">最佳实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/practice/picturePreview.html" class="nav-link">
  聊聊图片预览的两种方法
</a></li><li class="dropdown-item"><!----> <a href="/practice/toString.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  巧用Javascript的toString方法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/sort.html" class="nav-link">
  介绍一下各种排序算法
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/CathyZYF/CathyZYF.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JS基本功" class="dropdown-title"><span class="title">JS基本功</span> <span class="arrow down"></span></button> <button type="button" aria-label="JS基本功" class="mobile-dropdown-title"><span class="title">JS基本功</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/garbageCollect.html" class="nav-link">
  聊聊JS垃圾回收机制
</a></li><li class="dropdown-item"><!----> <a href="/JS/shallow&amp;deepClone.html" class="nav-link">
  聊聊Javascript里的深浅拷贝
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="HTTP网络" class="dropdown-title"><span class="title">HTTP网络</span> <span class="arrow down"></span></button> <button type="button" aria-label="HTTP网络" class="mobile-dropdown-title"><span class="title">HTTP网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTTP/crossOrigin.html" class="nav-link">
  从cookie讲到跨域
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="最佳实践" class="dropdown-title"><span class="title">最佳实践</span> <span class="arrow down"></span></button> <button type="button" aria-label="最佳实践" class="mobile-dropdown-title"><span class="title">最佳实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/practice/picturePreview.html" class="nav-link">
  聊聊图片预览的两种方法
</a></li><li class="dropdown-item"><!----> <a href="/practice/toString.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  巧用Javascript的toString方法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/algorithm/sort.html" class="nav-link">
  介绍一下各种排序算法
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/CathyZYF/CathyZYF.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/practice/picturePreview.html" class="sidebar-link">聊聊图片预览的两种方法</a></li><li><a href="/practice/toString.html" aria-current="page" class="active sidebar-link">巧用Javascript的toString方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/practice/toString.html#_1-function" class="sidebar-link">1.Function</a></li><li class="sidebar-sub-header"><a href="/practice/toString.html#_2-array" class="sidebar-link">2.Array</a></li><li class="sidebar-sub-header"><a href="/practice/toString.html#_3-number" class="sidebar-link">3.Number</a></li><li class="sidebar-sub-header"><a href="/practice/toString.html#_4-date" class="sidebar-link">4.Date</a></li><li class="sidebar-sub-header"><a href="/practice/toString.html#_5-回到object-prototype-tostring" class="sidebar-link">5.回到Object.prototype.toString</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="巧用javascript的tostring方法"><a href="#巧用javascript的tostring方法" class="header-anchor">#</a> 巧用Javascript的toString方法</h1> <p>昨天在看一道关于判断变量类型的面试题时，提到了运用<code>Object.prototype.toString.call(arg)</code>来判断变量类型。我由此对toString这个常常出现但并不被人重视的方法产生了兴趣，于是乎，尝试写下一篇博客，记录一些和它相关的知识点。如有错误，欢迎指正。</p> <p>首先，我们知道，每个对象实例都可以调用toString方法。对于一切皆对象的JavaScript来说，ES5的五种基本类型(Boolean,String,Number,Null,Undefined)的前三种也可以使用toString转换成字符串（Null和Undefined可以使用String()方法来转换）。</p> <p>但不是每个对象的toString方法，都是直接继承自<code>Object.prototype.toString</code>的。许多内置对象比如Function,Array，都在自身都层级上对该方法进行了重写，下面让我带大家一起看看，不同对象上的toString方法各有什么特点。</p> <h2 id="_1-function"><a href="#_1-function" class="header-anchor">#</a> 1.Function</h2> <p>如果我们对一个function类型的对象(或者直接称为函数)调用toString,输出的是该函数的源码:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
test<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">/* 对于用户定义的函数，将输出源码
    &quot;function test(){
        console.log('hello')
    }&quot;
*/</span>
    
test<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/*对一个内置函数使用toString,将会输出：
&quot;function toString() { [native code] }&quot;
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>当一个函数需要表示为一个字符串，或者当函数与一个字符串连接时，toString方法会自动被调用</li> <li>当<code>Function.prototype.toString</code>被一个非函数类型调用时，将会抛出一个错误</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-array"><a href="#_2-array" class="header-anchor">#</a> 2.Array</h2> <p>当对一个数组使用toString时，将会返回数组内每个成员调用toString后的结果，并以逗号分割</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>test<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/* 其中test是上文中定义的函数test,由于null没有toString方法，将会返回空字符串
   最终结果为：
    &quot;function test(){
    console.log('hello')
    },,1,2,3&quot;
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_3-number"><a href="#_3-number" class="header-anchor">#</a> 3.Number</h2> <p>当对一个数字使用toString后，返回的结果毫无疑问是该数字对应的字符串。但值得一提的是，Number类型的toString方法可以传入一个参数，该参数为输出数字字符串的基数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;10&quot;</span>
    num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// &quot;1010&quot;</span>
    num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">// &quot;12&quot;</span>
    num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token comment">// &quot;a&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_4-date"><a href="#_4-date" class="header-anchor">#</a> 4.Date</h2> <p>对日期对象使用toString后，返回的是一个在ECMA-262标准中被规定好的字符串</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Wed May 27 2020 23:15:01 GMT+0800 (中国标准时间)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>值得一提的是，Date 类型还有一些专门用于将日期格式化为字符串的方法，这些方法如下。</p> <ul><li>toDateString()——以特定于实现的格式显示星期几、月、日和年;</li> <li>toTimeString()——以特定于实现的格式显示时、分、秒和时区;</li> <li>toLocaleDateString()——以特定于地区的格式显示星期几、月、日和年;</li> <li>toLocaleTimeString()——以特定于实现的格式显示时、分、秒;</li> <li>toUTCString()——以特定于实现的格式完整的 UTC 日期</li> <li></li></ul> <h2 id="_5-回到object-prototype-tostring"><a href="#_5-回到object-prototype-tostring" class="header-anchor">#</a> 5.回到Object.prototype.toString</h2> <p>说了这么多，让我们回到所有这些toString的祖先上来。之所以所有对象都能够调用toString方法，正是因为其原型链的源头Object.prototype上存在这个方法。
MDN上对该方法做了如下阐述：</p> <blockquote><p>Every object has a toString() method that is automatically called when the object is to be represented as a text value or when an object is referred to in a manner in which a string is expected. By default, the toString() method is inherited by every object descended from Object. If this method is not overridden in a custom object, toString() returns &quot;[object type]&quot;, where type is the object type.</p></blockquote> <p>现在我们知道了，之所以能用Object.prototype.toString来判断变量类型，正是因为这个“原始”的方法，返回的是&quot;[Object type]&quot;这种格式的字符串，其中的type就代表着该变量的类型（甚至包括null和undefined）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> toString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [object Date]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object String]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// [object Math]</span>

<span class="token comment">// Since JavaScript 1.8.5</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// [object Undefined]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// [object Null]</span>
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>好了，以上就是我对toString的总结，你有什么想法？欢迎留言让我知道😁</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/practice/picturePreview.html" class="prev">
        聊聊图片预览的两种方法
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.75dc69ab.js" defer></script><script src="/assets/js/2.a673c79f.js" defer></script><script src="/assets/js/15.16cf6885.js" defer></script>
  </body>
</html>
